---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import ProductList from '@/components/ecommerce/ProductList';
import { getProducts } from '@/lib/products';

// 1. Obtener productos DESDE POCKETBASE (servidor)
const products = await getProducts('buzos');

console.log('Productos obtenidos:', products?.length || 0, 'productos');
console.log('Tipo de products:', typeof products);


const metadata = {
  title: 'Buzos',
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->

  <Hero tagline="Simplex Buzos">
    <Fragment slot="title">
      Buzos
    </Fragment>

    <Fragment slot="subtitle">
      Nuestros buzos en tus dispositivos.
    </Fragment>
  </Hero>

  <!---------- Product List --------------------------->
  
  <div class="intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
    <ProductList client:load products={products || []}></ProductList>
  </div>
  
</Layout>
