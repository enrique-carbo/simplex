---
import Layout from '@/layouts/PageLayout.astro';
import Hero from '@/components/widgets/Hero.astro';
import ProductList from '@/components/ecommerce/ProductList';
---

<Layout metadata={{ title: 'Remeras' }}>
  <!-- Hero Widget ******************* -->
  <Hero tagline="Simplex Remeras">
    <Fragment slot="title">
      Remeras
    </Fragment>
    <Fragment slot="subtitle">
      Nuestras remeras en tus dispositivos.
    </Fragment>
  </Hero>

  <!---------- Product List --------------------------->

  <div class="intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
    <!-- ProductList ahora maneja su propia data desde Nanostores
      - client:only="react" asegura que se ejecute solo en cliente
      - category="remeras" filtra desde el store global
      - showCategoryTitle={true} muestra el tÃ­tulo de categorÃ­a
    -->
    <ProductList client:load category="remeras"/>
  </div>

  <!-- Script de diagnÃ³stico (opcional, para debug) -->
  <script>
    console.log('ğŸª PÃ¡gina /remeras cargada');
    console.log('ğŸ”— PocketBase URL:', import.meta.env.PUBLIC_POCKETBASE_URL);
    console.log('ğŸ“± Entorno:', import.meta.env.MODE);
    
    // Verificar si hay cache de productos en localStorage
    const cached = localStorage.getItem('simplex_products_cache_v1');
    if (cached) {
      try {
        const parsed = JSON.parse(cached);
        console.log(`ğŸ“¦ Cache encontrado: ${parsed.data?.length || 0} productos`);
        console.log(`ğŸ• Cache fecha: ${new Date(parsed.timestamp).toLocaleString()}`);
      } catch(e) {
        console.log('ğŸ“¦ Cache invÃ¡lido');
      }
    }
  </script>
</Layout>